<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="../assets/buttons.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mo Tech: Simple Game/Bundle Order</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS Variables for Color Palette (Normally in style.css, integrated here for one-file mandate) -->
    <style>
        :root {
            --primary-blue: #007bff; /* A nice blue */
            --accent-cyan: #00bcd4;  /* A bright cyan */
            --charcoal: #1f2937;     /* Dark background */
        }
    </style>

    <!-- Tailwind Configuration Script -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Use CSS variables defined above
                        'primary-blue': 'var(--primary-blue)', 
                        'accent-cyan': 'var(--accent-cyan)',  
                        'charcoal': 'var(--charcoal)',     
                    }
                }
            }
        }
    </script>
</head>
<!-- Apply dark background and center content -->
<body class="min-h-screen p-4 sm:p-8 text-white bg-charcoal flex items-center justify-center">

    <!-- Main Container -->
    <div class="max-w-xl w-full mx-auto">

        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary-blue to-accent-cyan tracking-tight">
                Simple Game Pass Order
            </h1>
            <p class="text-gray-400 mt-2 text-lg">Just tell us the game and what bundle/pass you need.</p>
        </header>

        <!-- Confirmation Message Box (Hidden by default, used instead of alert()) -->
        <div id="confirmationMessage" class="hidden p-4 mb-6 rounded-lg border-2 bg-gray-900/70 text-center shadow-lg transition-all duration-300">
            <!-- Content populated by JavaScript -->
        </div>

        <!-- ORDER FORM (JS Fetch Submission) -->
        <form id="form" class="space-y-6 bg-gray-800 p-8 rounded-xl shadow-2xl border border-gray-700/50">
            
            <!-- Optional Subject Field -->
            <input type="hidden" name="_subject" value="New Game/Bundle Order Request">
            
            <!-- Optional field to customize the form identifier -->
            <input type="hidden" name="_wp" value="Game_Order_Page_Simple">

            <!-- GAME NAME Input -->
            <div>
                <label for="gameName" class="block text-lg font-semibold mb-2 text-accent-cyan">Game Name:</label>
                <input type="text" id="gameName" name="Game_Name" required placeholder="e.g., Baldur's Gate 3, Fortnite" 
                       class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
            </div>

            <!-- Requested Pass/Bundle Textarea -->
            <div>
                <label for="gamePassInput" class="block text-lg font-semibold mb-2 text-accent-cyan">Requested Pass / IN-GAME Bundle:</label>
                <textarea id="gamePassInput" name="Requested_Pass_Bundle" required rows="3" placeholder="e.g., Ultimate Pass (12 Mo), or, IN GAME V-Bucks Bundle (13,500). Be specific!" 
                          class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out"></textarea>
                <p class="text-sm text-gray-400 mt-2">Frrr, this is needed so we know exactly what you want.</p>
            </div>
            
            <div class="pt-4 border-t border-gray-700/50">
                <p class="text-lg font-bold text-gray-300 mb-4">Your Contact Info:</p>

                <!-- Full Name Input -->
                <div>
                    <label for="fullName" class="block text-lg font-semibold mb-2 text-accent-cyan">Full Name:</label>
                    <input type="text" id="fullName" name="Customer_Name" required placeholder="John Doe" 
                           class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
                </div>

                <!-- Phone Number Input -->
                <div>
                    <label for="phoneNum" class="block text-lg font-semibold mb-2 text-accent-cyan">Phone Number:</label>
                    <input type="tel" id="phoneNum" name="Phone_Number" required placeholder="+20 XXX XXX XXXX" 
                           class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
                </div>

                <!-- Email Address Input -->
                <div>
                    <label for="emailAddress" class="block text-lg font-semibold mb-2 text-accent-cyan">Email Address:</label>
                    <input type="email" id="emailAddress" name="Email" required placeholder="example@gmail.com" 
                           class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="w-full py-3 mt-8 font-extrabold text-xl rounded-lg shadow-xl transform transition-all duration-300
                bg-accent-cyan hover:bg-primary-blue text-gray-900
                hover:scale-[1.02] hover:shadow-2xl hover:shadow-accent-cyan/50 focus:outline-none focus:ring-4 focus:ring-accent-cyan/70">
                Place Order
            </button>
        </form>

    </div>
    
    <!-- JAVASCRIPT LOGIC (Using Fetch API for submission) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('form');
            const submitBtn = form.querySelector('button[type="submit"]');
            const confirmationBox = document.getElementById('confirmationMessage');
            // The access key is hardcoded here, as requested by the user's JS snippet
            const ACCESS_KEY = "c0b217eb-9e66-4470-8f51-907b26e75eec"; 

            function showMessage(message, isSuccess = true) {
                // Clear existing classes and set visibility
                confirmationBox.className = 'p-4 mb-6 rounded-lg border-2 bg-gray-900/70 text-center shadow-lg transition-all duration-300';
                confirmationBox.classList.remove('hidden');

                const colorClass = isSuccess ? 'border-green-400 text-green-400' : 'border-red-400 text-red-400';
                const icon = isSuccess ? '✅' : '❌';
                
                confirmationBox.classList.add(colorClass);
                confirmationBox.innerHTML = `<p class="font-semibold">${icon} ${message}</p>`;
            }
            
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Hide previous messages
                confirmationBox.classList.add('hidden');

                const formData = new FormData(form);
                formData.append("access_key", ACCESS_KEY);

                const originalText = submitBtn.textContent;

                // Set loading state
                submitBtn.textContent = "Sending...";
                submitBtn.disabled = true;
                submitBtn.classList.add('opacity-50', 'cursor-not-allowed');
                
                // Show processing message (Styling is slightly different for processing)
                showMessage("Processing your order...", false); 
                confirmationBox.classList.remove('border-red-400', 'text-red-400');
                confirmationBox.classList.add('border-accent-cyan', 'text-accent-cyan');


                try {
                    const response = await fetch("https://api.web3forms.com/submit", {
                        method: "POST",
                        body: formData
                    });

                    const data = await response.json();

                    if (response.ok && data.success) {
                        // Success!
                        showMessage("Order Sent! We'll hit you up ASAP.", true);
                        form.reset();
                    } else {
                        // Handle API errors
                        console.error("Web3Forms error:", data);
                        let errorMsg = data.message || "An unknown server error occurred, ikr?";
                        
                        // Specific handling for the security error mentioned before
                        if (errorMsg.includes("security reasons")) {
                             errorMsg = "Submission blocked for security reasons. Deploy to a live domain to fix this, bet?";
                        }

                        showMessage(`Error: ${errorMsg}`, false);
                    }

                } catch (error) {
                    // Handle network errors
                    console.error("Fetch error:", error);
                    showMessage("Damnnn, Network Error: Could not connect to the API. Try again, frrr.", false);
                } finally {
                    // Reset button state
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });
        });
    </script>
</body>
</html>
