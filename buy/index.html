<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="../assets/buttons.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mo Tech: Game Pass/Bundle Order Form</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="style.css"> 

    <script>
        // Custom colors defined as CSS variables in styles.css are now referenced here
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': 'var(--primary-blue)', 
                        'accent-cyan': 'var(--accent-cyan)',  
                        'charcoal': 'var(--charcoal)',     
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen p-4 sm:p-8 text-white bg-charcoal flex items-center justify-center">

    <div class="max-w-xl w-full mx-auto">

        <header class="text-center mb-10">
            <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary-blue to-accent-cyan tracking-tight">
                Order Your Game Passes & Bundles
            </h1>
            <p class="text-gray-400 mt-2 text-lg">Select the game and specify the exact pass or IN-GAME bundle you need.</p>
        </header>

        <div id="confirmationMessage" class="hidden p-6 mb-8 rounded-lg border-2 border-primary-blue bg-gray-900/70 text-center shadow-lg transition-all duration-300">
            </div>

        <form id="orderForm" class="space-y-6 bg-gray-800 p-8 rounded-xl shadow-2xl border border-gray-700/50">
            
            <input type="hidden" name="access_key" value="48f09d69-46ae-4126-abf1-bafe9934fdd3">
            
            <div>
                <label for="gameNameDropdown" class="block text-lg font-semibold mb-2 text-accent-cyan">Select Game:</label>
                <select id="gameNameDropdown" name="Game_Name" required class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
                    <option value="" disabled selected>-- Choose a Game --</option>
                </select>
            </div>

            <div>
                <label for="gamePassInput" class="block text-lg font-semibold mb-2 text-accent-cyan">Specify Pass / IN-GAME Bundle:</label>
                <textarea id="gamePassInput" name="Requested_Pass_Bundle" rows="4" required placeholder="e.g., Ultimate Pass (12 Mo), or, IN GAME V-Bucks Bundle (13,500). List multiple items on new lines." class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out"></textarea>
                <p class="text-sm text-gray-400 mt-2">Be specific! Include "IN GAME" if applicable.</p>
            </div>

            <div>
                <label for="fullName" class="block text-lg font-semibold mb-2 text-accent-cyan">Full Name:</label>
                <input type="text" id="fullName" name="Customer_Name" required placeholder="John Doe" class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="phoneNum" class="block text-lg font-semibold mb-2 text-accent-cyan">Phone Number:</label>
                <input type="tel" id="phoneNum" name="Phone_Number" required placeholder="+20 XXX XXX XXXX" class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="emailAddress" class="block text-lg font-semibold mb-2 text-accent-cyan">Email Address:</label>
                <input type="email" id="emailAddress" name="Email" required placeholder="example@gmail.com.com" class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out">
            </div>

            <button id="submitButton" type="submit" class="w-full py-3 mt-8 font-extrabold text-xl rounded-lg shadow-xl transform transition-all duration-300
                            bg-accent-cyan hover:bg-primary-blue text-gray-900
                            hover:scale-[1.02] hover:shadow-2xl hover:shadow-accent-cyan/50 focus:outline-none focus:ring-4 focus:ring-accent-cyan/70">
                Place Order
            </button>
        </form>
    </div>

    <script type="module">
        // --- GLOBAL VARIABLES & DOM REFERENCES ---
        const orderForm = document.getElementById('orderForm');
        const submitButton = document.getElementById('submitButton');
        const confirmationBox = document.getElementById('confirmationMessage');
        const gameNameDropdown = document.getElementById('gameNameDropdown'); 
        const gamePassInput = document.getElementById('gamePassInput'); 

        // --- HARDCODED GAME LIST DATA ---
        const gameList = [
            "Cyberpunk 2077",
            "Elden Ring",
            "God of War Ragnarök",
            "Hogwarts Legacy",
            "Spider-Man 2",
            "Call of Duty: MW III",
            "EA Sports FC 25",
            "The Legend of Zelda: Tears of the Kingdom",
            "Diablo IV",
            "Resident Evil 4 Remake",
            "Final Fantasy XVI",
            "Starfield",
            "Baldur's Gate 3",
            "Minecraft",
            "Fortnite",
            "Grand Theft Auto V",
        ];


        // --- BUILD DROPDOWN UI ---
        function buildGameDropdown(games) {
            // Remove the placeholder option before inserting data options
            gameNameDropdown.innerHTML = '<option value="" disabled selected>-- Choose a Game --</option>'; 
            
            games.sort((a, b) => a.localeCompare(b));
            
            games.forEach(game => {
                const option = document.createElement('option');
                option.value = game;
                option.textContent = game;
                gameNameDropdown.appendChild(option);
            });
        }

        // --- FORM SUBMISSION HANDLER (Uses Fetch API to Web3Forms) ---
        async function submitOrderHandler(event) {
            event.preventDefault();
            event.stopImmediatePropagation();

            const form = event.target;
            
            // --- Validation logic ---
            if (!gameNameDropdown.value) {
                confirmationBox.innerHTML = `<p class="text-red-400 font-semibold">Frrr, you gotta select a Game Name first!</p>`;
                confirmationBox.classList.remove('hidden');
                return;
            }

            if (!gamePassInput.value.trim()) {
                confirmationBox.innerHTML = `<p class="text-red-400 font-semibold">You need to specify the Pass or Bundle you want, bestie!</p>`;
                confirmationBox.classList.remove('hidden');
                return;
            }
            // ------------------------

            // --- 1. Set Loading State ---
            submitButton.disabled = true;
            submitButton.textContent = 'Sending...';
            confirmationBox.classList.add('hidden');
            
            try {
                // --- 2. Gather Data ---
                const formData = new FormData(form);
                const object = {};
                
                // Get all fields directly 
                formData.forEach((value, key) => {
                    object[key] = value;
                });
                
                // --- 3. Send Data via Fetch to Web3Forms ---
                const response = await fetch("https://api.web3forms.com/submit", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(object)
                });
                
                const result = await response.json();

                // --- 4. Handle Response & Confirmation ---
                if (response.ok && result.success) {
                    const customerName = object['Customer_Name'];
                    const requestedGame = object['Game_Name'];
                    const requestedPass = object['Requested_Pass_Bundle'].split('\n').join(', '); // For clean display

                    // Success message with the requested content
                    confirmationBox.innerHTML = `
                        <p class="text-3xl font-bold text-green-400 mb-2">✅ Order Sent!</p>
                        <p class="text-xl mb-2">You ordered for <span class="text-primary-blue font-bold">${requestedGame}</span>, <span class="text-accent-cyan font-semibold">${customerName}</span>.</p>
                        <p class="text-lg">Requested items: **${requestedPass}** have been successfully requested. **Ttyl, we'll hit you up ASAP!**</p>
                        <p class="mt-4 text-xs text-gray-500">(Details sent via Web3Forms)</p>
                    `;
                    form.reset();
                } else {
                    console.error("Web3Forms error:", result);
                    confirmationBox.innerHTML = `<p class="text-red-400 font-semibold">Submission failed: ${result.message || 'Damnnn, an unknown error occurred on the server.'}</p>`;
                }

            } catch (error) {
                console.error("Fetch API error:", error);
                confirmationBox.innerHTML = `<p class="text-red-400 font-semibold">Network Error: Frrr, could not connect to Web3Forms.</p>`;
            } finally {
                // --- 5. Reset Button State ---
                submitButton.textContent = 'Place Order';
                submitButton.disabled = false;
                confirmationBox.classList.remove('hidden');
            }
        }


        // --- INITIALIZE ---
        document.addEventListener('DOMContentLoaded', () => {
            // Attach the submission handler to the form.
            orderForm.addEventListener('submit', submitOrderHandler);
            
            // Build the initial dropdown list.
            buildGameDropdown(gameList);
        });
    </script>
</body>
</html>